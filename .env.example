# AI Feedback Platform - Environment Variables

# Application Environment
# Set to 'production' for production environments
# When set to 'production', Redis/BullMQ will be enabled by default
NODE_ENV=development

# Database Connection
# PostgreSQL connection URL (takes precedence over individual parameters)
DATABASE_URL=postgres://username:password@localhost:5432/database_name
# Individual PostgreSQL connection parameters (used if DATABASE_URL is not set)
PGHOST=localhost
PGPORT=5432
PGUSER=postgres
PGPASSWORD=postgres
PGDATABASE=ai_feedback

# Redis Configuration
# Set to 'true' to enable Redis and BullMQ even in non-production environments
# This is useful for testing the queue in development
ENABLE_REDIS=false

# Redis connection URL (takes precedence over individual parameters)
# IMPORTANT FOR DEPLOYMENT: This must be a valid Redis URL with proper credentials
# Example format: redis://username:password@host:port
# For some Redis providers like Upstash, use the full connection string they provide
REDIS_URL=redis://username:password@localhost:6379

# Individual Redis connection parameters (used if REDIS_URL is not set)
# These will be ignored if REDIS_URL is provided
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_USERNAME=
REDIS_DB=0

# AI API Keys
# At least one of these should be set for AI feedback generation
# If both are provided, Gemini will be used by default
GEMINI_API_KEY=your_gemini_api_key
OPENAI_API_KEY=your_openai_api_key

# Session Configuration
# REQUIRED: A secure random string used to sign session cookies
# This MUST be set to a strong, unique, random value at least 32 characters long
# For production: Run this command to generate a secure random value:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET=

# Security
# REQUIRED: Secret key for CSRF protection
# This MUST be set to a strong, unique, random value at least 32 characters long
# For production: Run this command to generate a secure random value:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
CSRF_SECRET=

# Auth0 Configuration for SSO
# REQUIRED for SSO with MIT Horizon
AUTH0_DOMAIN=your-tenant.auth0.com
AUTH0_CLIENT_ID=your_client_id
AUTH0_CLIENT_SECRET=your_client_secret

# Base application URL - REQUIRED for production deployments 
# Used to construct callback URLs and links consistently
# e.g., 'https://aigrader.replit.app' (no trailing slash)
BASE_URL=https://your-app-domain.com

# Auth0 callback URL - REQUIRED and must be whitelisted in Auth0 dashboard
# For production, set this to your full callback URL, matching what's in your Auth0 settings
# If not set, it will be constructed from BASE_URL + '/api/auth-sso/callback'
AUTH0_CALLBACK_URL=http://localhost:5000/api/auth-sso/callback

# IMPORTANT: When using Auth0, you must whitelist TWO URLs in your Auth0 application settings:
# 1. The callback URL above (AUTH0_CALLBACK_URL or BASE_URL + '/api/auth-sso/callback')
# 2. The logout return URL (BASE_URL + '/auth' or your login page URL)
# This is required for the complete SSO authentication flow to work properly

# Other Configuration
# Maximum file upload size in bytes (default: 10MB)
MAX_UPLOAD_SIZE=10485760